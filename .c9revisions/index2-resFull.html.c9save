{"ts":1352138458671,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<!DOCTYPE html>\r\n<html>\r\n    <head>\r\n        <title>PinRes - Resume Pinner</title>\r\n        <script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js\"></script>\r\n        <script src=\"//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js\"></script>\r\n        \r\n        <script src=\"resume-scripts.js\"></script>\r\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"resume-style.css\">\r\n        <link href=\"//netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n        \r\n     \r\n        <style src=\"http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/redmond/jquery-ui.css\"></style>\r\n        \r\n        \r\n        <script type=\"text/javascript\" src=\"lib/jquery/jquery-1.4.2.js\"></script>\r\n\t\t<script type=\"text/javascript\" src=\"lib/jquery/jquery-ui-1.8.2.custom.min.js\"></script>\r\n\t\t<script type=\"text/javascript\" src=\"jquery-dynamic-form.js\"></script>\r\n        \r\n        <script type=\"text/javascript\" src=\"//cloud.github.com/downloads/kangax/fabric.js/0.9.15.min.js\"></script>\r\n        <script type=\"text/javascript\" src=\"https://raw.github.com/kangax/fabric.js/master/lib/fonts/Times_New_Roman.font.js\"></script>            \r\n        <script type=\"text/javascript\" src=\"https://raw.github.com/kangax/fabric.js/master/lib/fonts/DejaVu_Serif_400.font.js\"></script>            \r\n \r\n    \r\n    <script>\r\n       function GUID ()\r\n        {\r\n            var S4 = function ()\r\n            {\r\n                return Math.floor(\r\n                        Math.random() * 0x10000 /* 65536 */\r\n                    ).toString(16);\r\n            };\r\n        \r\n            return (\r\n                    S4() + S4() + \"-\" +\r\n                    S4() + \"-\" +\r\n                    S4() + \"-\" +\r\n                    S4() + \"-\" +\r\n                    S4() + S4() + S4()\r\n                );\r\n        }\r\n\r\n        function setGuid()\r\n        {\r\n            $(\"#session\")[0].value = GUID();    \r\n        }\r\n\r\n// add startswith to javascript strings\r\nif (typeof String.prototype.startsWith != 'function') {\r\n  // see below for better implementation!\r\n  String.prototype.startsWith = function (str){\r\n    return this.indexOf(str) == 0;\r\n  };\r\n}\r\n    \r\n    \r\n    //FORM VALIDATION\r\n        function validateForm()\r\n        {\r\n        var x=document.forms[\"myForm\"][\"fname\"].value;\r\n        if (x==null || x==\"\")\r\n          {\r\n          alert(\"First name must be filled out\");\r\n          return false;\r\n          }\r\n        }\r\n    \r\n    // MAKE THE PHOTO DRAGGABLE\r\n    \r\n        function allowDrop(ev)\r\n    {\r\n    ev.preventDefault();\r\n    }\r\n    \r\n    function drag(ev)\r\n    {\r\n    ev.dataTransfer.setData(\"Text\",ev.target.id);\r\n    }\r\n    \r\n    function drop(ev)\r\n    {\r\n    ev.preventDefault();\r\n    var data=ev.dataTransfer.getData(\"Text\");\r\n    ev.target.appendChild(document.getElementById(data));\r\n    }\r\n\r\n\r\n        \r\n        \r\n    //ADD A SEPARATOR\r\n      function mySeparator()\r\n    {\r\n        \r\n    var c=document.getElementById(\"myCanvas\");\r\n    var ctx=c.getContext(\"2d\");\r\n    \r\n      //Draw a red line at y=200\r\n    ctx.strokeStyle=\"red\";\r\n    ctx.moveTo(5,200);\r\n    ctx.lineTo(395,200);\r\n    ctx.stroke();\r\n    \r\n    }\r\n\r\n\r\n\r\n    //ADD COLOR\r\n    function myFunctionColor()\r\n    {\r\n    var c=document.getElementById(\"myCanvas\");\r\n    var ctx=c.getContext(\"2d\");\r\n    \r\n    // Create gradient\r\n    var grd=ctx.createLinearGradient(0,0,200,0);\r\n    grd.addColorStop(0,\"red\");\r\n    grd.addColorStop(1,\"white\");\r\n    \r\n    // Fill with gradient\r\n    ctx.fillStyle=grd;\r\n    ctx.fillRect(0,0,250,100);\r\n    }\r\n\r\n\r\n    //ADD NAME\r\n    function myFunctionNameLine()\r\n     {\r\n        var vfname=document.getElementById('fname').value;\r\n        var vlname=document.getElementById('lname').value;\r\n        //alert(fname);\r\n        \r\n        var c=document.getElementById(\"myCanvas\");\r\n        var ctx=c.getContext(\"2d\");\r\n        \r\n        ctx.fillStyle = \"#ffc0c0\";\r\n        // For Testing Only So You Can See the Rectangle that will be Cleared \r\n        ctx.fillRect(10, 35, 290,100);\r\n        \r\n        //Clears the Line for New Text\r\n        //ctx.clearRect(10, 35, 290,15);\r\n        \r\n        ctx.fillStyle = \"#000000\";\r\n        ctx.font         = 'bold 20px sans-serif';\r\n        ctx.fillText(vfname+ \" \" + vlname,10,50);    \r\n        \r\n        //Draw a red line at y=200\r\n        ctx.strokeStyle=\"red\";\r\n        ctx.moveTo(10,55);\r\n        ctx.lineTo(395,55);\r\n        ctx.stroke();\r\n            \r\n        \r\n    //writeDataUrl()\r\n    }\r\n    \r\n    \r\n     function myFunctionAddressLine1()\r\n     {\r\n          \r\n        var vaddress1=document.getElementById('address1').value;\r\n              \r\n        var c=document.getElementById(\"myCanvas\");\r\n        var ctx=c.getContext(\"2d\");\r\n        \r\n        ctx.fillStyle = \"#c0ffc0\";\r\n        // For Testing Only So You Can See the Rectangle that will be Cleared \r\n        ctx.fillRect(10, 62, 290,10);\r\n        \r\n        //Clears the Line for New Text Rect(x, y, width,height)\r\n        //ctx.clearRect(5, 50, 290,10);\r\n        \r\n        ctx.fillStyle = \"#000000\";\r\n        ctx.font     = 'bold 10px sans-serif';\r\n        ctx.fillText(vaddress1,10,70);          \r\n            \r\n        \r\n   // writeDataUrl()\r\n    }\r\n    \r\n    function myFunctionAddressLine2()\r\n     {\r\n        var vaddress2=document.getElementById('address2').value;\r\n              \r\n        var c=document.getElementById(\"myCanvas\");\r\n        var ctx=c.getContext(\"2d\");\r\n        \r\n        ctx.fillStyle = \"#c0ceff\";\r\n        // For Testing Only So You Can See the Rectangle that will be Cleared \r\n        ctx.fillRect(10, 75, 290,10);\r\n        \r\n        //Clears the Line for New Text\r\n        //ctx.clearRect(10, 75, 290,10);\r\n        \r\n        ctx.fillStyle = \"#000000\";\r\n        ctx.font     = 'bold 10px sans-serif';\r\n        ctx.fillText(vaddress2,10,85);          \r\n            \r\n        \r\n    //writeDataUrl()\r\n    }\r\n    \r\n     function myFunctionCityLine()\r\n     {\r\n        var vcity=document.getElementById('city').value;\r\n        var vstate=document.getElementById('state').value;\r\n        var vzip=document.getElementById('zip').value;\r\n    \r\n        var c=document.getElementById(\"myCanvas\");\r\n        var ctx=c.getContext(\"2d\");\r\n        \r\n        ctx.fillStyle = \"#eeffc0\";\r\n        // For Testing Only So You Can See the Rectangle that will be Cleared \r\n        ctx.fillRect(10, 94, 290,10);\r\n        \r\n        //Clears the Line for New Text\r\n        //ctx.clearRect(10, 70, 290,10);\r\n        \r\n        ctx.fillStyle = \"#000000\";\r\n        ctx.font     = 'bold 10px sans-serif';\r\n        ctx.fillText(vcity + \", \" + vstate + \" \" + vzip,10,100);          \r\n            \r\n        \r\n    //writeDataUrl()\r\n    }\r\n    \r\n     function myFunctionCountryLine()\r\n     {\r\n        var vcountry=document.getElementById('country').value;\r\n                \r\n        var c=document.getElementById(\"myCanvas\");\r\n        var ctx=c.getContext(\"2d\");\r\n        \r\n        ctx.fillStyle = \"#c0c0c0\";\r\n        // For Testing Only So You Can See the Rectangle that will be Cleared \r\n        ctx.fillRect(10, 113, 290,10);\r\n        \r\n        //Clears the Line for New Text\r\n        //ctx.clearRect(10, 80, 290,10);\r\n        \r\n        ctx.fillStyle = \"#000000\";\r\n        ctx.font     = 'bold 10px sans-serif';\r\n        ctx.fillText(vcountry,10,120);          \r\n            \r\n        \r\n    //writeDataUrl()\r\n    }\r\n    \r\n    \r\n        \r\n    function myFunctionPhoto()\r\n    {\r\n    var c=document.getElementById(\"myCanvas\");\r\n    var ctx=c.getContext(\"2d\");\r\n    var img=document.getElementById(\"photo\");\r\n     //alert(\"hi\");\r\n    ctx.drawImage(img,10,10);\r\n    }\r\n    \r\n    \r\n    // loaded automatically on page load\r\nwindow.onload = function() {\r\n    var div = document.getElementById(\"canvasDiv\");\r\n    var canvas = document.getElementById(\"myCanvas\");\r\n    canvas.height = div.offsetHeight;\r\n    canvas.width  = div.offsetWidth;\r\n}\r\n\r\nvar writeDataUrl = function(){\r\n     var c=document.getElementById(\"myCanvas\");\r\n    $('#dataurl')[0].value=    c.toDataURL();\r\n       $(\"#session\")[0].value = GUID();   \r\n       $(\"#resformdata\")[0].value = $(\":input \").serializeArray()\r\n}\r\n\r\n\r\n\r\n\r\nfunction populatCanvasFromForm(){\r\n    \r\n    //alert(\"hi\");\r\n    var text = \"\";\r\n   // var formAsArray = $(\"#resForm\").serializeArray()\r\n   // $.each(formAsArray,function(idx,x){text += x.name  +\":\" + x.value + \"\\n\";}) HUGE STRING FOR NAME N ADDRESS\r\n\r\n    //get a reference to the the canvas on the page and wrap it in the Fabric lib\r\n    var canvas = new fabric.Canvas('myCanvas',{\r\n                                                  backgroundColor: \"#ffffff\"\r\n                                                });\r\n      \r\n    //Add the first block of text - CANDIATE Personal Information\r\n    var vfname=document.getElementById('fname').value;\r\n    var vlname=document.getElementById('lname').value;\r\n    \r\n    var vaddress1=document.getElementById('address1').value;\r\n    var vaddress2=document.getElementById('address2').value;\r\n    \r\n    var vcity=document.getElementById('city').value;\r\n    var vstate=document.getElementById('state').value;\r\n    var vzip=document.getElementById('zip').value;\r\n    \r\n    var vcountry=document.getElementById('country').value;\r\n               \r\n      \r\n    //BEGIN Candidate Name Section ----\r\n        // BLOCK 1 Create the fabric text object for Cadidate First Name and Last Name\r\n        var textObj = new fabric.Text(vfname + \" \" + vlname , { \r\n          fontFamily: 'DejaVu_Serif_400', \r\n          left: 10,\r\n          top: 10,\r\n          fontSize: 26,\r\n         // textAlign: \"left\",\r\n          fill:\"#000000\",  // Set text color to BLUE\r\n          //backgroundColor: \"#ffffff\"\r\n      });\r\n    \r\n          //compute the top and left Coordinates. NOTE that the Fabric js uses top,left for the CENTER of the object\r\n          textObj.top = Math.floor(textObj.height /2) + 1;\r\n          textObj.left = Math.floor(textObj.width /2) + 1;\r\n          //Then ADD the textObj to the Canvas\r\n          canvas.add(textObj);\r\n    //END Candidate Name Section ----\r\n        \r\n        \r\n     //BEGIN Candidate Address Section ----\r\n          //BLOCK 2 Create the fabric text object for Cadidate ADDRESS\r\n            var textObj2 = new fabric.Text(vaddress1 + \" \" + vaddress2  +\" \" + vcity + \",\" + vstate  + \" \" + vzip + \" \" + vcountry, { \r\n              fontFamily: 'DejaVu_Serif_400', \r\n              left: 0,\r\n              top: 0,\r\n              fontSize: 20,\r\n             // textAlign: \"left\",\r\n              fill:\"#000000\",  // Set text color to BLUE\r\n              //backgroundColor: \"#ffffff\"\r\n          });\r\n          \r\n           //Calculate the CENTER of the object that needs to follow\r\n          textObj2.top  = textObj.height + Math.floor(textObj2.height /2) + 5;\r\n          //width is only dependant on this obj, not the previous one\r\n          textObj2.left = Math.floor(textObj2.width /2) + 1;\r\n      \r\n          //Add THIRD obj to canvas\r\n          canvas.add(textObj2);\r\n    //END Candidate Address Section ----\r\n    \r\n    \r\n    //BEGIN EMPLOYMENT Section(s) ----\r\n          //Add next object dupe this for jobs\r\n                //get all the form items - JOBS ONLY\r\n          $(\"#job_history :input\").each(function(idx,item){\r\n             \r\n                text += item.value + \"\\n\"\r\n          })\r\n          \r\n          \r\n          var textObj3 = new fabric.Text(text, { \r\n              fontFamily: 'DejaVu_Serif_400', \r\n              left: 0,\r\n              top: 0,\r\n              fontSize: 16,\r\n              textAlign: \"left\",\r\n              fill:\"#000000\"  // Set text color to black\r\n          });\r\n          \r\n          //Calculate the CENTER of the object that needs to follow\r\n          textObj3.top  = textObj.height + textObj2.height + Math.floor(textObj3.height /2) + 10;\r\n          //width is only dependant on this obj, not the previous one\r\n          textObj3.left = Math.floor(textObj3.width /2) + 1;\r\n      \r\n          //Add THIRD obj to canvas\r\n          canvas.add(textObj3);\r\n    //END EMPLOYMENT Section(s) ----\r\n\r\n}\r\n</script>\r\n\r\n\r\n    </head>\r\n<body>\r\n    <div class=\"header\"><img src=\"images/PinRes-Resume.jpg\">\r\n    </div>        \r\n    \r\n    <div class=\"demo-description\">\r\n        <p>Build a Resume to Pin - DEMO</p>\r\n    </div>\r\n    \r\n    \r\n    <div class=\"container demo\">\r\n        <div class=\"row\">\r\n        \r\n        <div id=\"canvasDiv\" class=\"span4\">\r\n            <!--- LEFT COLUMN --->\r\n            <canvas id=\"myCanvas\" width=\"250\" height=\"1000\" style=\"border:1px solid #000000;\">Your Browser Does Not Support This Technology\r\n            </canvas>       \r\n        </div>\r\n        <div class=\"span8\">\r\n            <!---- RIGHT COLUMN-->\r\n            <!--COLOR:<BR / >\r\n            <input type=\"button\" onclick=\"myFunctionColor()\" value=\"Add Color\" /><BR / ><BR / >\r\n            ADD A SEPARATOR - make this replicable and draggable<BR />\r\n            <input type=\"button\" onclick=\"mySeparator()\" value=\"Add a Separator\" /><BR /><BR / >\r\n            -->\r\n          \r\n             <p><b>ABOUT YOU:</b></p>\r\n            \r\n            <form method=\"post\" action=\"#\" value=\"Post\" id=\"resForm\">\r\n            <input type=\"button\" onclick=\"myFunctionPhoto()\" value=\"Add Your Photo\" />\r\n            <img id=\"photo\" src=\"https://raw.github.com/metrony/pinxp/master/images/Molly-125px.jpg\" /><BR / ><BR / >\r\n          \r\n        \r\n            <!--<input type=\"button\" onclick=\"myFunction2()\" value=\"Add Your Name\" /> -->\r\n            <input type=\"text\" id=\"fname\" name=\"fname\" value=\"first name\" onblur=\"populatCanvasFromForm();\">\r\n                \r\n            <input type=\"text\" id=\"lname\" size=\"28\" value=\"last name\" onblur=\"populatCanvasFromForm();\">\r\n              \r\n                 \r\n            <input type=\"text\" id=\"address1\" name=\"address1\" value=\"Address 1\" onblur=\"populatCanvasFromForm();\"><BR / >\r\n            <input type=\"text\" id=\"address2\" name=\"address2\" value=\"Address 2\" onblur=\"populatCanvasFromForm();\"><BR / >\r\n            <input type=\"text\" id=\"city\" value=\"city\" onblur=\"populatCanvasFromForm();\"><input type=\"text\" id=\"state\" value=\"state or province\" onblur=\"populatCanvasFromForm();\"><input type=\"text\" id=\"zip\" size=\"10\" value=\"zip or postal\" onblur=\"populatCanvasFromForm();\"><BR / >\r\n            <input type=\"text\" id=\"country\" value=\"country\" onblur=\"populatCanvasFromForm();\">\r\n             \r\n            <BR /><BR />\r\n        \r\n            <!-- **************** BEGIN JOBS SECTION **************** -->\r\n\r\n\t\t\t<fieldset id=\"job_history\">\r\n\t\t\t\t<h2>Employment History</h2>\r\n\t\t\r\n\t\t\t\t<fieldset id=\"people\">\r\n\t\t\t\t\t\r\n\t\t\t\t<h3>Fill In Your Information</h3>\r\n                    <p><label for=\"employer_name\">Employer Name: </label><input id=\"employer_name\" type=\"text\" name=\"employer_name\" size=\"30\" onblur=\"myFxEmployer();\"></p>\r\n    \t\t\t\t<p><label for=\"address\">Location: </label><input id=\"address\" type=\"text\" name=\"adr\" size=\"30\" onblur=\"myFxEmployer();\"></p>\r\n    \t\t\t\t\r\n    \t\t\t\t<p><label for=\"city\">Date Range: </label><input id=\"date\" type=\"text\" name=\"date\" size=\"50\" onblur=\"myFxEmployer();\"></p>\r\n    \t\t\t\t\r\n    \t\t\t\t<p id='skillTemplate'><label for=\"skill\">Skills: </label><input id=\"skill\" type=\"text\" name=\"skill\" size=\"50\"></p>\r\n                    \r\n    \t\t\t\t<p><span class=\"adder\">Add Another Skill <a id=\"minus5\" href=\"\">[-]</a> <a id=\"plus5\" href=\"\">[+]</a></span></p>\r\n    \t\t\t\t\r\n    \t\t\t\t<!--<p id='phone2Template'><label for=\"phone2\">telephone 2 : </label><input id=\"phone2\" type=\"text\" name=\"phone2\" size=\"50\"><br /> -->\r\n\t\t\t\t    <!-- <label for=\"professionnal\">Professional ?</label><input id=\"professionnal\" type=\"checkbox\" value=\"pro\" name=\"phonePro\" /> <br />-->\r\n    \t\t\t\t<p><label for=\"description\">Description</label><textarea id=\"description\" name=\"description\" rows=\"4\" cols=\"50\" maxlength=\"50\"></textarea>\r\n    \t\t\t\t</p>\r\n                   \r\n\t\t\t\t</fieldset>\r\n                \r\n\t\t\t\t<p><span class=\"adder\">Add Another Position: <a id=\"minus\" href=\"\">[-]</a> <a id=\"plus\" href=\"\">[+]</a></span></p>\r\n\t\t\t</fieldset>\r\n\t\t\t<input type=\"button\" onclick=\"populatCanvasFromForm()\" value=\"submit\" />\r\n\t\t</form>\r\n        \r\n        <!-- END JOBS SECTION -->\r\n       \r\n        </div><!---- END RIGHT BAR DIV-->\r\n        </div><!-- ends row-fluid div -->\r\n    </div><!-- ends fluid demo div -->\r\n   \r\n    <form action=\"/api/save_resume\" method=\"POST\">\r\n        <input type=\"hidden\" name=\"session\" id=\"session\"></input>\r\n          <input type=\"hidden\" name=\"resformdata\" id=\"resformdata\"></input>\r\n        <textarea id=\"dataurl\" name=\"dataurl\"></textarea>\r\n        <input type=\"submit\"/>\r\n    </form>\r\n</body>\r\n</html>"]],"start1":0,"start2":0,"length1":0,"length2":16557}]],"length":16557}
{"ts":1352138454937,"patch":[[{"diffs":[[0,"tate  + "],[1,"\\n"],[0,"\" \" + vz"]],"start1":10264,"start2":10264,"length1":16,"length2":18}]],"length":16559,"saved":false}
{"ts":1352138456383,"patch":[[{"diffs":[[0,"te  + \\n"],[1," + "],[0,"\" \" + vz"]],"start1":10266,"start2":10266,"length1":16,"length2":19}]],"length":16562,"saved":false}
{"ts":1352138470407,"patch":[[{"diffs":[[0,"e  +"],[-1," \\n +"],[0," \" \""]],"start1":10267,"start2":10267,"length1":13,"length2":8}]],"length":16557,"saved":false}
{"contributors":[],"silentsave":false,"ts":1352139369802,"patch":[[{"diffs":[[0,"   \r\n \r\n"],[1,"         <script type=\"text/javascript\" src=\"lib/pinterest-plus-html5.min.js\"></script>\r\n"],[0,"    \r\n  "]],"start1":1334,"start2":1334,"length1":16,"length2":105}]],"length":16646,"saved":false}
{"ts":1352139394283,"patch":[[{"diffs":[[0,"--\r\n\r\n}\r"],[1,"\n\r\n//NEW Code for pinbutton\r\n/*\r\n1)  add         <script type=\"text/javascript\" src=\"lib/pinterest-plus-html5.min.js\">\r\n2)where you want to button to show add:\r\n\r\n      <div id=\"pin-it-button\" class=\"pin-it-button\" data-url=\"\" data-image=\"\" data-description=\"\"></div>\r\n\r\n3) wire up the form on the bottom of the page to call the createResumeImage\r\n         <input type=\"button\" onclick=\"createResumeImage()\" value=\"Create image and see PIN button\"/> (value does not matter)\r\n*/\r\n\r\n //setup pintrest button\r\n function setupPin(pageUrl, imageUrl, descr){\r\n     $(\"#pin-it-button\").attr(\"data-url\", pageUrl);\r\n     $(\"#pin-it-button\").attr(\"data-image\", imageUrl);\r\n     $(\"#pin-it-button\").attr(\"data-description\", descr);\r\n     PinterestPlus.pinit()\r\n  }\r\n     \r\n  //this call actually sends the data to the API and upon success renders the pin button\r\n  function createResumeImage(){\r\n      if ( $(\"#dataurl\")[0].value.length < 10) {alert(\"No canvas data to send!\");return}\r\n      $.post('/api/save_resume',{dataurl: $(\"#dataurl\")[0].value,session: $(\"#session\")[0].value }, function(data) {\r\n          var descr = document.getElementById('fname').value + \"'s Resume\";\r\n          /*********\r\n          *** NOTE: Page url is harccoded here\r\n          */\r\n          //data['ok'] will be the image url of the Resume as returned by the API call\r\n          setupPin(\"http://pinxp.metrony.c9.io/index3-resFull.html\", data['ok'],descr);\r\n        });\r\n  }\r"],[0,"\n</scrip"]],"start1":12104,"start2":12104,"length1":16,"length2":1464}]],"length":18094,"saved":false}
{"ts":1352139406794,"patch":[[{"diffs":[[0,") ----\r\n"],[1,"           writeDataUrl()"],[0,"\r\n}\r\n\r\n/"]],"start1":12100,"start2":12100,"length1":16,"length2":41}]],"length":18119,"saved":false}
{"ts":1352139408634,"patch":[[{"diffs":[[0,"ataUrl()"],[1,";"],[0,"\r\n}\r\n\r\n/"]],"start1":12125,"start2":12125,"length1":16,"length2":17}]],"length":18120,"saved":false}
{"ts":1352139412525,"patch":[[{"diffs":[[0,"ection(s) ----\r\n"],[1,"    \r\n"],[0,"           write"]],"start1":12092,"start2":12092,"length1":32,"length2":38}]],"length":18126,"saved":false}
{"ts":1352139454218,"patch":[[{"diffs":[[0,"-->\r\n   "],[1,"<div id=\"pin-it-button\" class=\"pin-it-button\" data-url=\"\" data-image=\"\" data-description=\"\"></div>"],[0,"\r\n    <f"]],"start1":17800,"start2":17800,"length1":16,"length2":114},{"diffs":[[0,"tarea>\r\n        "],[1," "],[0,"<input type=\"sub"]],"start1":18155,"start2":18155,"length1":32,"length2":33},{"diffs":[[0,"t type=\""],[-1,"submit"],[1,"button\" onclick=\"createResumeImage()\" value=\"Create image and see PIN button"],[0,"\"/>\r\n   "]],"start1":18177,"start2":18177,"length1":22,"length2":92}]],"length":18295,"saved":false}
{"contributors":[],"silentsave":false,"ts":1352140523526,"patch":[[{"diffs":[[0,"\n \r\n"],[-1,"         <script type=\"text/javascript\" src=\"lib/pinterest-plus-html5.min.js\"></script>\r\n"],[0,"    "]],"start1":1338,"start2":1338,"length1":97,"length2":8},{"diffs":[[0,"ress2  +"],[-1,"\""],[0," "],[1,"\"\\n"],[0,"\" + vcit"]],"start1":10234,"start2":10234,"length1":18,"length2":20},{"diffs":[[0,"--\r\n"],[-1,"    \r\n           writeDataUrl();\r\n}\r\n\r\n//NEW Code for pinbutton\r\n/*\r\n1)  add         <script type=\"text/javascript\" src=\"lib/pinterest-plus-html5.min.js\">\r\n2)where you want to button to show add:\r\n\r\n      <div id=\"pin-it-button\" class=\"pin-it-button\" data-url=\"\" data-image=\"\" data-description=\"\"></div>\r\n\r\n3) wire up the form on the bottom of the page to call the createResumeImage\r\n         <input type=\"button\" onclick=\"createResumeImage()\" value=\"Create image and see PIN button\"/> (value does not matter)\r\n*/\r\n\r\n //setup pintrest button\r\n function setupPin(pageUrl, imageUrl, descr){\r\n     $(\"#pin-it-button\").attr(\"data-url\", pageUrl);\r\n     $(\"#pin-it-button\").attr(\"data-image\", imageUrl);\r\n     $(\"#pin-it-button\").attr(\"data-description\", descr);\r\n     PinterestPlus.pinit()\r\n  }\r\n     \r\n  //this call actually sends the data to the API and upon success renders the pin button\r\n  function createResumeImage(){\r\n      if ( $(\"#dataurl\")[0].value.length < 10) {alert(\"No canvas data to send!\");return}\r\n      $.post('/api/save_resume',{dataurl: $(\"#dataurl\")[0].value,session: $(\"#session\")[0].value }, function(data) {\r\n          var descr = document.getElementById('fname').value + \"'s Resume\";\r\n          /*********\r\n          *** NOTE: Page url is harccoded here\r\n          */\r\n          //data['ok'] will be the image url of the Resume as returned by the API call\r\n          setupPin(\"http://pinxp.metrony.c9.io/index3-resFull.html\", data['ok'],descr);\r\n        });\r\n  "],[1,"\r\n"],[0,"}\r\n<"]],"start1":12017,"start2":12017,"length1":1490,"length2":10},{"diffs":[[0,"\n   "],[-1,"<div id=\"pin-it-button\" class=\"pin-it-button\" data-url=\"\" data-image=\"\" data-description=\"\"></div>"],[0,"\r\n  "]],"start1":16237,"start2":16237,"length1":106,"length2":8},{"diffs":[[0,"tarea>\r\n        "],[-1," "],[0,"<input type=\"but"]],"start1":16490,"start2":16490,"length1":33,"length2":32},{"diffs":[[0,"pe=\""],[-1,"button\" onclick=\"createResumeImage()\" value=\"Create image and see PIN button"],[1,"submit"],[0,"\"/>\r"]],"start1":16515,"start2":16515,"length1":84,"length2":14}]],"length":16559,"saved":false}
{"ts":1352140572568,"patch":[[{"diffs":[[0,"address1 + \""],[-1," "],[1,"\\n"],[0,"\" + vaddress"]],"start1":10213,"start2":10213,"length1":25,"length2":26},{"diffs":[[0,"\" + vzip + \""],[-1," "],[1,"\\n"],[0,"\" + vcountry"]],"start1":10277,"start2":10277,"length1":25,"length2":26}]],"length":16561,"saved":false}
{"ts":1352140606410,"patch":[[{"diffs":[[0,"ity + \","],[1," "],[0,"\" + vsta"]],"start1":10253,"start2":10253,"length1":16,"length2":17}]],"length":16562,"saved":false}
